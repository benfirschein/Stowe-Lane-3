<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Stowe Lane Parcels</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  html, body, #map { height: 100%; margin: 0; }
  .apn-label {
    font: 600 12px/1.1 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
    color: #000;
    text-shadow: 0 0 2px rgba(255,255,255,0.9), 0 0 6px rgba(255,255,255,0.9);
    white-space: nowrap;
  }
  .leaflet-tooltip.apn-label { background: transparent; border: none; box-shadow: none; }
</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>

<script>
// CHANGE this to match the property name in your file (maybe "apn" or "APN")
const apnKey = "APN";

const map = L.map('map', { preferCanvas: true });
L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
  attribution: '&copy; OpenStreetMap &copy; CARTO'
}).addTo(map);

// Load the external GeoJSON file
fetch("stowe_lane_parcels_manual_apns.geojson")
  .then(resp => resp.json())
  .then(data => {
    const layer = L.geoJSON(data, {
      style: {
        color: '#333333',
        weight: 1,
        fillColor: '#808080',
        fillOpacity: 0.9
      },
      onEachFeature: function (feature, lyr) {
        const label = (feature.properties && feature.properties[apnKey]) ? String(feature.properties[apnKey]) : '';
        if (label) {
          const centroid = turf.center(feature).geometry.coordinates;
          L.marker([centroid[1], centroid[0]], {
            interactive: false,
            icon: L.divIcon({
              className: 'apn-label',
              html: label,
              iconSize: null
            })
          }).addTo(map);
        }
      }
    }).addTo(map);

    map.fitBounds(layer.getBounds(), { padding: [30, 30] });
  });
</script>
</body>
</html>
